---
layout: post
title: 2381. Shifting Letters II
image: Mine/1695204627229.jpg
date: 2025-01-05 20:00:00 +0900
tags: [Problem_Solving]
categories: Problem_Solving
difficulty: Medium
topics: [Array, String, Prefix Sum]
---

# 2381. Shifting Letters II
[ë¬¸ì œ ë§í¬](https://leetcode.com/problems/shifting-letters-ii/description/?envType=daily-question&envId=2025-01-05)

<br/>

## ë‚´ ì½”ë“œ
í•´ì„¤ ì°¸ê³ .

<br/>

## Solution

### Approach: Difference Array
- *176ms, 15.95MB*
- Complexity
  - Let $n$ be the size of the string `s` and $m$ the size of the `shifts` array.
  - Time Complexity: $O(n + m)$
  - Space Complexity: $O(n)$

```cpp
class Solution {
public:
    string shiftingLetters(string s, vector<vector<int>>& shifts) {
        int n = s.size();
        vector<int> diffArray(
            n, 0);  // Initialize a difference array with all elements set to 0.

        for (auto shift : shifts) {
            if (shift[2] == 1) {        // If direction is forward (1):
                diffArray[shift[0]]++;  // Increment at the start index to
                                        // indicate a forward shift.
                if (shift[1] + 1 < n) {
                    diffArray[shift[1] +
                              1]--;  // Decrement at the end+1 index to stop the
                                     // effect of the shift.
                }
            } else {                    // If direction is backward (0):
                diffArray[shift[0]]--;  // Decrement at the start index to
                                        // indicate a backward shift.
                if (shift[1] + 1 < n) {
                    diffArray[shift[1] +
                              1]++;  // Increment at the end+1 index to stop the
                                     // effect of the shift.
                }
            }
        }

        string result(n, ' ');
        int numberOfShifts = 0;

        for (int i = 0; i < s.size(); i++) {
            numberOfShifts = (numberOfShifts + diffArray[i]) %
                             26;  // Update cumulative shifts, keeping within
                                  // the alphabet range.
            if (numberOfShifts < 0)
                numberOfShifts +=
                    26;  // Ensure `numberOfShifts` is non-negative.

            // Calculate the new character by shifting `s[i]`
            result[i] = 'a' + (s[i] - 'a' + numberOfShifts) % 26;
        }

        return result;
    }
};
```

<br/>

#### GPT
ì´ ì½”ë“œëŠ” **"Difference Array" ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë²”ìœ„ ì‹œí”„íŠ¸ ì—°ì‚°ì„ O(n)ìœ¼ë¡œ ìµœì í™”í•˜ëŠ” ë¬¸ì œ í•´ê²° ë°©ë²•**ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.  
ì¦‰, **ì—¬ëŸ¬ ê°œì˜ ì‹œí”„íŠ¸ ì—°ì‚°ì„ ë‹¨ìˆœ ë°˜ë³µí•˜ì§€ ì•Šê³  íš¨ìœ¨ì ìœ¼ë¡œ ëˆ„ì í•˜ì—¬ í•œ ë²ˆë§Œ ì²˜ë¦¬**í•©ë‹ˆë‹¤.  

---

## **ğŸ” ë¬¸ì œ ê°œìš”**
- ì£¼ì–´ì§„ ë¬¸ìì—´ `s`ì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ **ì‹œí”„íŠ¸ ì—°ì‚°**(`shifts[i] = [start, end, direction]`)ì´ ì£¼ì–´ì§.
- ê° `shifts[i]`ëŠ” **`s[start] ~ s[end]` ë²”ìœ„ë¥¼ ì‹œí”„íŠ¸**:
  - `direction == 1` â†’ **ì˜¤ë¥¸ìª½(+) ì‹œí”„íŠ¸**
  - `direction == 0` â†’ **ì™¼ìª½(-) ì‹œí”„íŠ¸**
- ëª¨ë“  ì‹œí”„íŠ¸ ì—°ì‚°ì„ ë°˜ì˜í•œ ìµœì¢… ë¬¸ìì—´ì„ ë°˜í™˜í•´ì•¼ í•¨.

---

## **ğŸ“Œ ì½”ë“œ ë¶„ì„**
### **1ï¸âƒ£ Difference Array (ì°¨ë¶„ ë°°ì—´) ìƒì„±**
```cpp
vector<int> diffArray(n, 0); // ì°¨ë¶„ ë°°ì—´ ì´ˆê¸°í™” (ëª¨ë“  ê°’ 0)
```
- `diffArray[i]`ëŠ” **`s[i]`ì— ì ìš©í•  ì´ ì‹œí”„íŠ¸ ë³€í™”ëŸ‰ì„ ë‚˜íƒ€ëƒ„**.
- ì—¬ëŸ¬ ê°œì˜ ì‹œí”„íŠ¸ë¥¼ O(n)ìœ¼ë¡œ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë¨.

---

### **2ï¸âƒ£ ì‹œí”„íŠ¸ ì—°ì‚° ë°˜ì˜ (ì°¨ë¶„ ë°°ì—´ ì—…ë°ì´íŠ¸)**
```cpp
for (auto shift : shifts) {
    if (shift[2] == 1) {  // ì˜¤ë¥¸ìª½(+) ì‹œí”„íŠ¸
        diffArray[shift[0]]++;
        if (shift[1] + 1 < n) {
            diffArray[shift[1] + 1]--;
        }
    } else {  // ì™¼ìª½(-) ì‹œí”„íŠ¸
        diffArray[shift[0]]--;
        if (shift[1] + 1 < n) {
            diffArray[shift[1] + 1]++;
        }
    }
}
```
- `diffArray[start]++`: `start`ë¶€í„° ì‹œí”„íŠ¸ ì ìš© ì‹œì‘  
- `diffArray[end + 1]--`: `end + 1`ë¶€í„° ì‹œí”„íŠ¸ ì¤‘ë‹¨  
- **ì´ ë°©ì‹ì€ ëˆ„ì í•©ì„ ì´ìš©í•˜ì—¬ O(n)ë§Œì— ëª¨ë“  ì‹œí”„íŠ¸ë¥¼ ì ìš© ê°€ëŠ¥**  

âœ… **O(n)ìœ¼ë¡œ ëª¨ë“  ì‹œí”„íŠ¸ ì—°ì‚° ë°˜ì˜ ê°€ëŠ¥!**  

---

### **3ï¸âƒ£ ëˆ„ì í•©ì„ ì´ìš©í•´ ìµœì¢… ì‹œí”„íŠ¸ ê°’ ê³„ì‚°**
```cpp
string result(n, ' '); // ìµœì¢… ê²°ê³¼ ë¬¸ìì—´
int numberOfShifts = 0;

for (int i = 0; i < s.size(); i++) {
    numberOfShifts = (numberOfShifts + diffArray[i]) % 26;  // ëˆ„ì í•© ê³„ì‚°
    if (numberOfShifts < 0) numberOfShifts += 26;  // ìŒìˆ˜ ë°©ì§€
```
- **ëˆ„ì í•©ì„ ì‚¬ìš©í•˜ì—¬ ê° ë¬¸ìì— ì ìš©í•  ìµœì¢… ì‹œí”„íŠ¸ ê°’(`numberOfShifts`)ì„ ê³„ì‚°**  
- `(numberOfShifts + diffArray[i]) % 26`ì„ ì‚¬ìš©í•˜ì—¬ **ì•ŒíŒŒë²³ ë²”ìœ„ ë‚´ì—ì„œ ë°˜ë³µ**  
- ìŒìˆ˜ê°€ ë˜ì§€ ì•Šë„ë¡ `+26`ì„ ì¶”ê°€í•˜ì—¬ ì¡°ì •  

âœ… **O(n)ìœ¼ë¡œ ëª¨ë“  ë¬¸ìì— ëŒ€í•´ ìµœì¢… ì‹œí”„íŠ¸ ê°’ ì ìš© ê°€ëŠ¥!**

---

### **4ï¸âƒ£ ìµœì¢… ë¬¸ì ë³€í™˜ ë° ë°˜í™˜**
```cpp
    result[i] = 'a' + (s[i] - 'a' + numberOfShifts) % 26;
}

return result;
```
- `s[i] - 'a'`: `s[i]`ë¥¼ ìˆ«ìë¡œ ë³€í™˜ (`a=0, b=1, ... z=25`)
- `+ numberOfShifts`: ëˆ„ì ëœ ì‹œí”„íŠ¸ ê°’ ì ìš©
- `% 26`: ì•ŒíŒŒë²³ ë²”ìœ„ë¥¼ ìœ ì§€
- `'a' + ...`: ë‹¤ì‹œ ë¬¸ìë¡œ ë³€í™˜

âœ… **ëª¨ë“  ë¬¸ìì— ëŒ€í•´ í•œ ë²ˆë§Œ ë³€í™˜í•˜ë¯€ë¡œ O(n)ìœ¼ë¡œ í•´ê²°!**

---

## **ğŸ“Œ ì˜ˆì œ ì‹¤í–‰**
```cpp
string s = "abc";
vector<vector<int>> shifts = { {0, 1, 1}, {1, 2, 1}, {0, 2, 0} };
Solution sol;
cout << sol.shiftingLetters(s, shifts);
```

### **Step 1: ì´ˆê¸° ì°¨ë¶„ ë°°ì—´ ìƒì„±**

| `s`  | `a`  | `b`  | `c`  |
|:---:|:---:|:---:|:---:|
| Index | `0` | `1` | `2` |
| `diffArray` ì´ˆê¸°ê°’ | `0` | `0` | `0` |

### **Step 2: ì°¨ë¶„ ë°°ì—´ ì—…ë°ì´íŠ¸**
#### **(1) `shifts[0] = {0, 1, 1}` (0~1 ì˜¤ë¥¸ìª½ ì‹œí”„íŠ¸)**
- `diffArray[0]++` â†’ `[1, 0, 0]`
- `diffArray[2]--` â†’ `[1, 0, -1]`

#### **(2) `shifts[1] = {1, 2, 1}` (1~2 ì˜¤ë¥¸ìª½ ì‹œí”„íŠ¸)**
- `diffArray[1]++` â†’ `[1, 1, -1]`
- `diffArray[3]--` (ë¬´ì‹œ)

#### **(3) `shifts[2] = {0, 2, 0}` (0~2 ì™¼ìª½ ì‹œí”„íŠ¸)**
- `diffArray[0]--` â†’ `[0, 1, -1]`
- `diffArray[3]++` (ë¬´ì‹œ)

âœ… ìµœì¢… `diffArray = [0, 1, -1]`

---

### **Step 3: ëˆ„ì í•© ê³„ì‚°**

| Index | `0`  | `1`  | `2`  |
|:---:|:---:|:---:|:---:|
| `diffArray` | `0`  | `1`  | `-1` |
| `numberOfShifts` (ëˆ„ì ) | `0`  | `1`  | `0`  |

---

### **Step 4: ìµœì¢… ë¬¸ì ë³€í™˜**

| Index | `s[i]` | Shifted (`s[i] + numberOfShifts`) | ê²°ê³¼ |
|:---:|:---:|:---:|:---:|
| 0 | `'a'` | `'a' + 0 = 'a'` | `'a'` |
| 1 | `'b'` | `'b' + 1 = 'c'` | `'c'` |
| 2 | `'c'` | `'c' + 0 = 'c'` | `'c'` |

âœ… **ìµœì¢… ì¶œë ¥: `"acc"`**

---

## **â± ì‹œê°„ ë³µì¡ë„ ë¶„ì„**

| ì—°ì‚° | ì‹œê°„ ë³µì¡ë„ |
|:---:|:---:|
| ì°¨ë¶„ ë°°ì—´ ì´ˆê¸°í™” | `O(n)` |
| ì‹œí”„íŠ¸ ì ìš© (`shifts` ìˆœíšŒ) | `O(m)` (`m` = `shifts.size()`) |
| ëˆ„ì í•© ê³„ì‚° | `O(n)` |
| ìµœì¢… ë¬¸ì ë³€í™˜ | `O(n)` |
| **ì „ì²´ ì‹œê°„ ë³µì¡ë„** | $O(n + m)$ |

âœ… **ë§¤ìš° íš¨ìœ¨ì ì¸ `O(n + m)` í•´ê²°ë²•!** ğŸš€  

---

## **ğŸ’¡ í•µì‹¬ ìµœì í™” í¬ì¸íŠ¸**
1. **ì°¨ë¶„ ë°°ì—´(Difference Array) ì‚¬ìš©** â†’ **O(n)** ë§Œì— ì‹œí”„íŠ¸ ì ìš© ê°€ëŠ¥  
2. **ëˆ„ì í•©(Prefix Sum) í™œìš©** â†’ í•œ ë²ˆì˜ `O(n)` ë°˜ë³µìœ¼ë¡œ ë¹ ë¥´ê²Œ ì‹œí”„íŠ¸ ë°˜ì˜  
3. **ëª¨ë“  ë¬¸ìë¥¼ í•œ ë²ˆë§Œ ì—…ë°ì´íŠ¸** â†’ O(n) ì´ë‚´ì— ìµœì¢… ë¬¸ìì—´ ë³€í™˜  

---

## **âœ… ê²°ë¡ **
âœ” **O(n + m)ìœ¼ë¡œ ìµœì í™”ëœ Difference Array ê¸°ë²• ì‚¬ìš©**  
âœ” **ë¬¸ìì—´ ë³€í™˜ ë¬¸ì œì—ì„œ ì‹œí”„íŠ¸ ì—°ì‚°ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” í•µì‹¬ ê¸°ë²•!** ğŸš€  
âœ” **`shifts`ê°€ ë§ì•„ë„ ë¹ ë¥¸ ì‹¤í–‰ì´ ê°€ëŠ¥** âœ…  
âœ” **ì•Œê³ ë¦¬ì¦˜ ë©´ì ‘ì—ì„œë„ ìœ ìš©í•œ í…Œí¬ë‹‰!** ğŸ¯

<br/>
